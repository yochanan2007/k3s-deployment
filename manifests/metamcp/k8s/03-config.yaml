apiVersion: v1
kind: ConfigMap
metadata:
  name: metamcp-config
  namespace: metamcp
  labels:
    app.kubernetes.io/name: metamcp
    app.kubernetes.io/component: config
data:
  # Application Configuration
  NODE_ENV: "production"
  POSTGRES_HOST: "metamcp-postgres"
  POSTGRES_PORT: "5432"
  APP_URL: "https://metamcp.k3s.dahan.house"
  NEXT_PUBLIC_APP_URL: "https://metamcp.k3s.dahan.house"
  TRANSFORM_LOCALHOST_TO_DOCKER_INTERNAL: "false"

  # Server Registry (GitOps - loaded from this ConfigMap)
  # To add new servers, edit this ConfigMap and apply changes
  # Format: JSON configuration for MCP servers
  servers.json: |
    {
      "k3s-proxy": {
        "type": "SSE",
        "url": "http://mcp-proxy.mcp-proxy.svc.cluster.local:80/mcp",
        "description": "K3s cluster services (AdGuard, Authentik, Rancher, etc.)",
        "enabled": true
      },
      "code-executor": {
        "type": "SSE",
        "url": "http://mcp-code-executor.mcp-executor.svc.cluster.local:80/mcp",
        "description": "Python code execution with Portainer access (token-efficient)",
        "enabled": true
      }
    }
